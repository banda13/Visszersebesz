<div class="w3-content w3-container w3-padding-64" id="blog">
  <section class="hero-wrap hero-wrap-2" style="background-image: url('/images/blood.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text align-items-center justify-content-center">
        <div class="col-md-9 ftco-animate text-center">
          <h1 class="mb-2 bread" style="color: black">Blog</h1>
          <p class="breadcrumbs"><span class="mr-2"><a href="index.php" style="color: black">Home <i class="ion-ios-arrow-forward"></i></a></span> <span style="color: black">Blog <i class="ion-ios-arrow-forward"></i></span></p>
        </div>
      </div>
    </div>
  </section>

  <section id="blog_container" class="ftco-section container bg-light">

  </section>
</div>

<script>
  $(document).ready(function () {
    $.get("/api/blog/read_posts_name.php", function (posts_name) {
      console.log(posts_name);
      let arr = JSON.parse(posts_name);

      for (let i = 0; i < arr.length; i++) {
        let name = arr[i];
        let id = name.replace(".html", "");

        let row_id = Math.floor(i / 3);
        if(i % 3 === 0){
          console.log("Append new row");
          $("#blog_container").append("<div id='row_" + row_id + "' class='row'></div>");
          $("#row_" + row_id).append("<div id='" + id + "' style='display: None' class='col-md-4'></div>");
        }
        else if(i % 3 === 1){
          $("#row_" + row_id).append("<div id='" + id + "' style='display: None' class='col-md-4'></div>");
        }
        else{
          $("#row_" + row_id).append("<div id='" + id + "' style='display: None' class='col-md-4'></div>");
        }


        $("#" + id).load("blog/posts/" + name, function () {
          $("#" + id).fadeIn("slow");
          $("#read_" + id).on("click", function () {
            window.location.href = '/blog.php?post=' + name.replace(".html", "");
          });

          $("#link_" + id).attr("href", '/blog.php?post=' + name.replace(".html", ""));
        });
      }
    });
  });
</script>